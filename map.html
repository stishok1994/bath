<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
        <!-- Bootstrap -->
        <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-select@1.13.18/dist/css/bootstrap-select.min.css">
        <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
        <!-- My scc -->
        <link rel="stylesheet" href="css/style.css">
        <link rel="stylesheet" href="css/pageBania.css">
        <link rel="stylesheet" href="css/map.css">
        <!-- Fonts -->
        <link rel="preconnect" href="https://fonts.googleapis.com">
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link href="https://fonts.googleapis.com/css2?family=Neucha&display=swap" rel="stylesheet">
        <link href="https://fonts.googleapis.com/css2?family=Neucha&family=Nunito:ital,wght@0,200..1000;1,200..1000&display=swap" rel="stylesheet">

        <!-- icon -->
        <script src="https://kit.fontawesome.com/5a4a530fa7.js" crossorigin="anonymous"></script>

        <!-- map -->
        <!-- <script src="https://api-maps.yandex.ru/2.1/?lang=ru_RU" type="text/javascript"></script> -->
        <script src="https://api-maps.yandex.ru/2.1/?lang=ru_RU&apikey=7bbc8996-5061-4e08-9dc8-320bb856b117" type="text/javascript"></script>

</head>
<body>
    <header>
        <div class="header-content hide_show_mobile">
            <div class="logo">Логотип</div>
            <a class="linkToHome" href="index.html">
                <div class="text-container_title">
                    <h1 class="header-title m-0">
                        Л<span class="red">ю</span>т<span class="red">ы</span>й п<span class="red">а</span>р
                    </h1>
                </div>
            </a>
        </div>
    </header>

    <!-- for mobile -->
     <div class="header_mobile ">
        <!-- img mobile -->
        <div class="img-top_block show_mobile  mb-3 ">
            <img class="img_top" src="img/logo2.png" alt="">
        </div>

        <!-- nav mobile -->
        <div class="show_mobile block_nav_mobile">
            <div class="row d-flex justify-content-between">
                <div class="col-3"><i class="fa-solid fa-location-dot" style="color: #e40707; font-size: 24px;" aria-hidden="true"></i><span class="locat_text_nav"> Воронеж</span></div>
                <div class="col-6 d-flex justify-content-center"><h1 class="header-title m-0">Лютый пар</h1></div>
                <div class="col-3 d-flex justify-content-end">
                    <!-- contact -->
                    <div class="d-flex justify-content-center mb-3 row">
                        <div class="col-4 d-flex justify-content-center"> <i class="fa-brands fa-whatsapp icon-contact icon-contact_my block_cursor" style="color: #25cb28;"></i></div>
                        <div class="col-4 d-flex justify-content-center"> <i class="fa-brands fa-telegram icon-contact icon-contact_my block_cursor" style="color: #2470f5;"></i></div>
                        <div class="col-4 d-flex justify-content-center"> <i class="fa-brands fa-vk icon-contact icon-contact_my block_cursor" style="color: #0443ae;"></i></div>
                    </div></div>
            </div>
        </div>

     </div>



    <div class="container main_block">
        
        
        <div id="map"></div>
        
        <script>
            document.addEventListener('DOMContentLoaded', function () {
                // Получение данных бань из localStorage
                const bathCardsLS = JSON.parse(localStorage.getItem('bathData')) || [];
                
                // Проверка, есть ли бани в localStorage
                if (bathCardsLS.length === 0) {
                    alert("Нет данных для отображения на карте.");
                    return;
                }

                // Инициализация карты
                ymaps.ready(function() {
                    const map = new ymaps.Map("map", {
                        center: [51.672779, 39.185726], // Центральные координаты карты
                        zoom: 12
                    });

                    // Добавление меток для каждой бани
                    bathCardsLS.forEach(bath => {
                        const address = bath.full_address;
                        
                        // Геокодирование адреса
                        ymaps.geocode(address).then(function (res) {
                            const firstGeoObject = res.geoObjects.get(0);
                            if (firstGeoObject) {
                                const coordinates = firstGeoObject.geometry.getCoordinates();

                                // Создание метки с информацией о бане
                                const placemark = new ymaps.Placemark(coordinates, {
                                    balloonContent: `
                                        <strong>${bath.name}</strong><br>
                                        <p>Цена: ${Math.round(bath.price)} ₽/час</p>
                                        <p><a href="https://yandex.ru/maps/?text=${encodeURIComponent(address)}" target="_blank">Посмотреть на Яндекс.Картах</a></p>
                                    `
                                });

                                map.geoObjects.add(placemark);
                            } else {
                                console.warn(`Не удалось найти координаты для адреса: ${address}`);
                            }
                        }).catch(function(error) {
                            console.error(`Ошибка геокодирования адреса ${address}: ${error}`);
                        });
                    });
                });
            });
        </script>


    </div>

    <footer>
        <p class="btm-text-footer">&copy; 2024 Лютый пар. Все права защищены. <br>
            Использование материалов возможно только по согласованию с правообладателями сайта.
        </p>
    </footer>
    <!-- bootstrap -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap-select@1.13.18/dist/js/bootstrap-select.min.js"></script>
    <!-- My js -->





    
</body>
</html>